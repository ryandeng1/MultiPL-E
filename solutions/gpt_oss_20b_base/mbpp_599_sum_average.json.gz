{"completions": ["Here is a clean, header\u2011only implementation that returns the sum and the average of the first *n* natural numbers.  \nIt uses only the standard library, avoids `bits/stdc++.h`, and works with both 32\u2011bit and 64\u2011bit compilers.\n\n```cpp\n#include <tuple>\n#include <cstdint>\n#include <limits>\n#include <stdexcept>\n\n/**\n * @brief Computes the sum and the average of the first `number` natural numbers.\n *\n * The function is defined only for positive values of `number`.\n * It returns a `std::tuple<long long, long double>` where:\n *   - first  : the exact integer sum\n *   - second : the average expressed as long double\n *\n * @param number the count of natural numbers to sum (must be > 0)\n * @return std::tuple containing sum and average\n * @throws std::invalid_argument if `number` <= 0\n * @throws std::overflow_error if the computed sum would overflow a 64\u2011bit signed integer\n */\ninline std::tuple<long long, long double>\nsum_average(std::int64_t number)\n{\n    if (number <= 0) {\n        throw std::invalid_argument(\"number must be a positive integer\");\n    }\n\n    /* \n     * Use the closed form: sum = n * (n + 1) / 2\n     * The product n*(n+1) fits in unsigned __int128 for all\n     * 64\u2011bit inputs (max ~ 2^127).\n     */\n    __int128 prod = static_cast<__int128>(number) * (number + 1);\n\n    if (prod > static_cast<__int128>(std::numeric_limits<long long>::max())) {\n        throw std::overflow_error(\"sum would overflow a 64\u2011bit signed integer\");\n    }\n\n    long long sum = static_cast<long long>(prod / 2);\n    long double average = static_cast<long double>(sum) / static_cast<long double>(number);\n\n    return {sum, average};\n}\n```\n\n### Usage example\n\n```cpp\n#include <iostream>\n\nint main() {\n    auto [sum, avg] = sum_average(10);   // 1 + \u2026 + 10 = 55\n    std::cout << \"Sum = \" << sum << \", Average = \" << avg << '\\n';\n}\n```\n\n### Why this implementation?\n\n1. **Safety** \u2013 It throws exceptions for invalid input and for potential overflow.  \n2. **Precision** \u2013 Uses `long double` for the average to keep a good fraction of the decimal part.  \n3. **Portability** \u2013 Only standard C++ headers are required; no non\u2011portable `<bits/stdc++.h>`.  \n4. **Performance** \u2013 O(1) arithmetic without loops.\n\nFeel free to adapt the return type or precision (e.g., `double` instead of `long double`) to match your project's requirements.", "Here\u2019s a ready\u2011to\u2011copy implementation that\u2019s safe, efficient and uses the standard C++ tuple.  \nIt works for **n\u202f>\u202f0** (natural numbers start at\u202f1) and also gracefully handles the corner case `n == 0`.\n\n```cpp\n#include <tuple>\n#include <stdexcept>\n\n/**\n * @brief  Return the sum and average of the first `number` natural numbers.\n * @param  number  The count of natural numbers to include (must be >= 0).\n * @return  A std::tuple< long, float > whose first element is the sum\n *          and second element is the average (as a float).\n *\n * @throws std::invalid_argument if number < 0.\n */\ninline std::tuple<long, float> sum_average(long number)\n{\n    if (number < 0)\n        throw std::invalid_argument(\"number must be non\u2011negative\");\n\n    // If number == 0, we decide that sum = 0 and average = 0.0f\n    if (number == 0)\n        return std::make_tuple(0L, 0.0f);\n\n    // Use the closed\u2011form formula for the sum of the first n natural numbers:\n    // S = n * (n + 1) / 2\n    long sum = number * (number + 1) / 2;      // integer arithmetic is safe here\n\n    // Compute the average as a floating\u2011point value\n    float avg = static_cast<float>(sum) / static_cast<float>(number);\n\n    return std::make_tuple(sum, avg);\n}\n```\n\n### Why this implementation?\n\n| Feature | Explanation |\n|---------|-------------|\n| **Closed\u2011form formula** | Computes `sum` in O(1) time, no loops, no risk of overflow (for 32\u2011bit values) until the intermediate multiplication, which is safe because `number * (number + 1)` fits in `long` for typical limits. |\n| **Type safety** | Returns a `std::tuple<long, float>` (`long` for the integer sum, `float` for the average). |\n| **Edge\u2011case handling** | Explicit check for negative input and a clear result for `number == 0`. |\n| **Inline** | The function is declared `inline` so it can be defined in a header without causing multiple definition errors. |\n| **Exception** | Throws `std::invalid_argument` if `number` is negative, letting the caller handle invalid usage. |\n\nFeel free to drop this function into your codebase; it\u2019s self\u2011contained, header\u2011friendly, and follows idiomatic C++ conventions.", "Here\u2019s the complete implementation of `sum_average` that receives a positive integer `number`, computes the sum of the first `number` natural numbers, calculates the average, and returns both values as a `std::tuple` (first element `long`, second element `float`).\n\n```cpp\n#include <tuple>\n#include <cassert>\n\nstd::tuple<long, float> sum_average(long number) {\n    // We expect a positive number of natural numbers.\n    assert(number > 0 && \"n must be a positive integer\");\n\n    // Sum of first n natural numbers: n*(n+1)/2\n    long sum = number * (number + 1) / 2;\n\n    // Average is sum divided by n.  We cast to float to get a floating\u2011point average.\n    float avg = static_cast<float>(sum) / static_cast<float>(number);\n\n    return std::make_tuple(sum, avg);\n}\n```\n\n### How it works\n1. **Assertion** \u2013 ensures that `number` is greater than zero; otherwise the program will terminate in debug builds.\n2. **Sum** \u2013 uses the closed\u2013form formula `n*(n+1)/2` which is O(1) time.\n3. **Average** \u2013 casts to `float` to avoid integer division and obtain a correct fractional result.\n4. **Return** \u2013 `std::make_tuple` creates an `std::tuple<long, float>` that holds the computed sum and average.\n\nYou can call the function like this:\n\n```cpp\nauto [sum, avg] = sum_average(10);\nstd::cout << \"Sum: \" << sum << \", Avg: \" << avg << '\\n';\n```\n\nThis will output:\n\n```\nSum: 55, Avg: 5.5\n```\n\nFeel free to integrate the function into your existing codebase."]}